---
import Layout from '../layouts/Layout.astro'

const b2cPlans = [
  {
    name: 'Базовый',
    price: 'Бесплатно',
    period: '',
    description: 'Для знакомства с платформой',
    features: [
      '1 проект дома',
      '3 варианта планировки',
      'Базовая 3D визуализация',
      'Экспорт в PDF'
    ],
    recommended: false,
    cta: { text: 'Начать бесплатно', href: 'https://studio.planometrica.ru' }
  },
  {
    name: 'Стандарт',
    price: '14 900',
    period: '/ за проект',
    description: 'Полный комплект для строительства',
    features: [
      'Неограниченные планировки',
      '10 архитектурных стилей',
      '3D визуализация (5 рендеров)',
      'СПОЗУ включён',
      'Планы этажей + фасады',
      'Ведомость материалов',
      'Предварительная смета'
    ],
    recommended: true,
    cta: { text: 'Выбрать Стандарт', href: 'https://studio.planometrica.ru' }
  }
]

const b2bPlans = [
  {
    name: 'Старт',
    price: '14 900',
    period: '/ в месяц',
    description: 'Для индивидуальных архитекторов',
    features: [
      'До 5 проектов/мес',
      'ПланоCAD редактор',
      'AI-ассистент НейроПлан',
      'Конструктивные элементы',
      'Базовая 3D визуализация',
      'Email поддержка'
    ],
    recommended: false,
    cta: { text: 'Выбрать Старт', href: '/planocad-demo' }
  },
  {
    name: 'ПРО',
    price: '33 200',
    period: '/ в месяц',
    description: 'Для архитектурных бюро',
    features: [
      'До 20 проектов/мес',
      'Всё из тарифа Старт',
      'Инженерные сети (MEP)',
      'Участок и территория',
      'Пакетная генерация',
      '3D визуализация неограниченно',
      'Приоритетная поддержка'
    ],
    recommended: true,
    cta: { text: 'Выбрать ПРО', href: '/planocad-demo' }
  },
  {
    name: 'Компания',
    price: 'По запросу',
    period: '',
    description: 'Для строительных компаний',
    features: [
      'Безлимитные проекты',
      'Всё из тарифа ПРО',
      'White-label брендирование',
      'Выделенный менеджер',
      'API доступ',
      'Кастомный SLA',
      'Обучение команды'
    ],
    recommended: false,
    cta: { text: 'Связаться', href: 'mailto:hello@planometrica.pro' }
  }
]

const faqs = [
  {
    question: 'Можно ли попробовать бесплатно?',
    answer: 'Да! Базовый тариф Студии полностью бесплатный. Вы получите 1 проект дома с 3 вариантами планировки и базовой 3D визуализацией. Регистрация занимает 30 секунд.'
  },
  {
    question: 'Что входит в стоимость Стандарт-пакета (14 900 ₽)?',
    answer: 'Полный комплект документации: неограниченные планировки, 10 архитектурных стилей, 5 рендеров экстерьера, СПОЗУ, планы этажей, фасады, ведомость материалов и предварительная смета.'
  },
  {
    question: 'Чем отличается ПланоCAD от Студии?',
    answer: 'Студия — это B2C продукт для частных заказчиков (проектирование своего дома). ПланоCAD — это B2B платформа для архитекторов и строительных компаний с ArchiCAD-подобным редактором, MEP-системами и пакетной генерацией.'
  },
  {
    question: 'Есть ли скидка при оплате за год?',
    answer: 'Да, при оплате ПланоCAD за год вы получаете 2 месяца бесплатно. Свяжитесь с нами для получения годового тарифа.'
  },
  {
    question: 'Как оформить White-label интеграцию?',
    answer: 'Напишите на partners@planometrica.pro — мы обсудим ваши сценарии использования, подготовим демо и коммерческое предложение. Интеграция занимает от 2 недель.'
  }
]
---

<Layout
  title="Тарифы — Planometrica"
  description="Тарифы для частных заказчиков и профессионалов. Студия бесплатно, полный проект от 14 900 ₽. ПланоCAD от 14 900 ₽/мес."
  keywords="тарифы planometrica, цены проектирование дома, стоимость СПОЗУ, планоCAD цена"
  ogImage="/images/og-pricing.jpg"
  canonical="/pricing"
>
  <main>
    <!-- СЕКЦИЯ 1: Hero -->
    <section class="bg-white py-24 pt-32">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            Тарифы
          </h1>
          <p class="text-xl text-gray-600">
            Выберите подходящий план для вашего проекта
          </p>
        </div>

        <!-- Tab Switcher -->
        <div class="flex justify-center mb-12">
          <div class="inline-flex bg-gray-100 rounded-xl p-1">
            <button
              id="tab-b2c"
              class="bg-white text-gray-900 shadow-sm rounded-lg px-6 py-2.5 font-medium text-sm transition-all"
            >
              Для себя
            </button>
            <button
              id="tab-b2b"
              class="text-gray-500 px-6 py-2.5 font-medium text-sm rounded-lg hover:text-gray-700 transition-all"
            >
              Для профессионалов
            </button>
          </div>
        </div>

        <!-- СЕКЦИЯ 2: Pricing Cards -->

        <!-- B2C Pricing -->
        <div id="pricing-b2c">
          <div class="grid md:grid-cols-2 gap-8">
            {b2cPlans.map((plan) => (
              <div class:list={[
                "bg-white rounded-2xl p-6 border-2 relative",
                plan.recommended ? "border-[#92CF93]" : "border-gray-200"
              ]}>
                {plan.recommended && (
                  <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-4 py-1 bg-[#92CF93] text-white text-xs font-medium rounded-full">
                    Рекомендуем
                  </div>
                )}
                <h3 class="text-xl font-bold text-gray-900 mb-1">{plan.name}</h3>
                <p class="text-gray-500 text-sm mb-4">{plan.description}</p>
                <div class="mb-6">
                  <span class="text-4xl font-bold text-[#0A4C76]">{plan.price}</span>
                  {plan.period && <span class="text-gray-500"> ₽ {plan.period}</span>}
                </div>
                <ul class="space-y-3 mb-6">
                  {plan.features.map((feature) => (
                    <li class="flex items-start gap-2 text-gray-600 text-sm">
                      <svg class="w-5 h-5 text-[#92CF93] flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                      </svg>
                      {feature}
                    </li>
                  ))}
                </ul>
                <a
                  href={plan.cta.href}
                  class:list={[
                    "block w-full py-3 text-center font-semibold rounded-xl transition-colors",
                    plan.recommended
                      ? "text-white bg-[#0A4C76] hover:bg-[#083d5f]"
                      : "text-[#0A4C76] bg-[#0A4C76]/10 hover:bg-[#0A4C76]/20"
                  ]}
                >
                  {plan.cta.text}
                </a>
              </div>
            ))}
          </div>
        </div>

        <!-- B2B Pricing -->
        <div id="pricing-b2b" class="hidden">
          <div class="grid md:grid-cols-3 gap-8">
            {b2bPlans.map((plan) => (
              <div class:list={[
                "bg-white rounded-2xl p-6 border-2 relative",
                plan.recommended ? "border-[#92CF93]" : "border-gray-200"
              ]}>
                {plan.recommended && (
                  <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-4 py-1 bg-[#92CF93] text-white text-xs font-medium rounded-full">
                    Популярный
                  </div>
                )}
                <h3 class="text-xl font-bold text-gray-900 mb-1">{plan.name}</h3>
                <p class="text-gray-500 text-sm mb-4">{plan.description}</p>
                <div class="mb-6">
                  <span class="text-4xl font-bold text-[#0A4C76]">{plan.price}</span>
                  {plan.period && <span class="text-gray-500"> ₽ {plan.period}</span>}
                </div>
                <ul class="space-y-3 mb-6">
                  {plan.features.map((feature) => (
                    <li class="flex items-start gap-2 text-gray-600 text-sm">
                      <svg class="w-5 h-5 text-[#92CF93] flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                      </svg>
                      {feature}
                    </li>
                  ))}
                </ul>
                <a
                  href={plan.cta.href}
                  class:list={[
                    "block w-full py-3 text-center font-semibold rounded-xl transition-colors",
                    plan.recommended
                      ? "text-white bg-[#0A4C76] hover:bg-[#083d5f]"
                      : "text-[#0A4C76] bg-[#0A4C76]/10 hover:bg-[#0A4C76]/20"
                  ]}
                >
                  {plan.cta.text}
                </a>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- СЕКЦИЯ 3: White-label Banner -->
    <section class="bg-gray-50 py-16">
      <div class="container mx-auto px-4">
        <div>
          <div class="bg-white rounded-2xl p-8 border border-gray-100 shadow-sm flex flex-col md:flex-row items-center justify-between gap-6">
            <div>
              <h3 class="text-2xl font-bold text-gray-900 mb-2">
                White-label для бизнеса
              </h3>
              <p class="text-gray-600">
                Встройте проектирование в свою платформу. API, SDK, полное брендирование.
              </p>
            </div>
            <div class="flex flex-col items-center md:items-end gap-3 flex-shrink-0">
              <div class="text-2xl font-bold text-[#0A4C76]">
                от 500 000 ₽/год
              </div>
              <a
                href="/partners"
                class="inline-flex items-center justify-center px-6 py-3 text-sm font-semibold text-white bg-[#0A4C76] rounded-xl hover:bg-[#083d5f] transition-colors"
              >
                Подробнее
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- СЕКЦИЯ 4: FAQ -->
    <section class="bg-white py-24">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <span class="inline-block px-4 py-2 bg-[#92CF93]/20 text-[#1A7BB3] font-medium rounded-full text-sm mb-4">
            Частые вопросы
          </span>
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900">
            Вопросы о тарифах
          </h2>
        </div>

        <div class="max-w-3xl mx-auto">
          {faqs.map((faq) => (
            <details class="border-b border-gray-200 py-4 group">
              <summary class="flex items-center justify-between cursor-pointer text-lg font-medium text-gray-900 hover:text-[#0A4C76] list-none">
                {faq.question}
                <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform flex-shrink-0 ml-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <p class="pt-3 text-gray-600 leading-relaxed">
                {faq.answer}
              </p>
            </details>
          ))}
        </div>
      </div>
    </section>
  </main>
</Layout>

<script>
  const tabB2C = document.getElementById('tab-b2c');
  const tabB2B = document.getElementById('tab-b2b');
  const pricingB2C = document.getElementById('pricing-b2c');
  const pricingB2B = document.getElementById('pricing-b2b');

  const activeClass = ['bg-white', 'text-gray-900', 'shadow-sm'];
  const inactiveClass = ['text-gray-500'];

  function switchTab(activeTab: Element | null, inactiveTab: Element | null, showBlock: Element | null, hideBlock: Element | null) {
    if (!activeTab || !inactiveTab || !showBlock || !hideBlock) return;

    activeTab.classList.add(...activeClass);
    activeTab.classList.remove(...inactiveClass);
    inactiveTab.classList.remove(...activeClass);
    inactiveTab.classList.add(...inactiveClass);
    showBlock.classList.remove('hidden');
    hideBlock.classList.add('hidden');
  }

  tabB2C?.addEventListener('click', () => switchTab(tabB2C, tabB2B, pricingB2C, pricingB2B));
  tabB2B?.addEventListener('click', () => switchTab(tabB2B, tabB2C, pricingB2B, pricingB2C));
</script>
